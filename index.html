<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
    <script>
        // !! IMPORTANT !!
        // Replace these with your actual Firebase project configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY", // <--- REPLACE THIS
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com", // <--- REPLACE THIS
            projectId: "YOUR_PROJECT_ID", // <--- REPLACE THIS
            storageBucket: "YOUR_PROJECT_ID.appspot.com", // <--- REPLACE THIS
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID", // <--- REPLACE THIS
            appId: "YOUR_APP_ID" // <--- REPLACE THIS
        };
        firebase.initializeApp(firebaseConfig);
    </script>

    <meta name="google-site-verification" content="YOUR_UNIQUE_GOOGLE_VERIFICATION_CODE" /> <title>YarikOgraf - Надихаюсь життям природи та її красою</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Tailwind CSS custom configuration for colors and font family
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        // Custom font family 'Inter' - ensure it's loaded if used
                        // 'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'header-yo-red': '#D41811', // Example custom color
                        // Add other custom colors here
                    }
                }
            }
        };
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 font-sans">

    <header class="bg-white shadow-md py-4">
        <div class="container mx-auto flex justify-between items-center px-4">
            <h1 class="text-2xl font-bold text-gray-800">YarikOgraf</h1>
            <nav>
                <ul class="flex space-x-4">
                    <li><a href="#" class="text-gray-600 hover:text-header-yo-red">Головна</a></li>
                    <li><a href="#" class="text-gray-600 hover:text-header-yo-red">Галерея</a></li>
                    <li><a href="#" class="text-gray-600 hover:text-header-yo-red">Про мене</a></li>
                    <li><a href="#" class="text-gray-600 hover:text-header-yo-red">Контакти</a></li>
                    <li><a href="login.html" class="text-gray-600 hover:text-header-yo-red">Адмін</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto mt-8 p-4">
        <section class="text-center py-12 bg-white rounded-lg shadow-md mb-8">
            <h2 class="text-4xl font-extrabold text-gray-900 mb-4">Надихаюсь життям природи та її красою</h2>
            <p class="text-lg text-gray-700 mb-6">Відкрийте для себе світ через об'єктив YarikOgraf.</p>
            <a href="#gallery" class="bg-header-yo-red text-white px-6 py-3 rounded-full text-lg hover:bg-red-700 transition duration-300">Переглянути роботи</a>
        </section>

        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h3 class="text-2xl font-bold text-gray-800 mb-4">Календар донатів</h3>
            <div class="flex flex-col md:flex-row justify-between items-start">
                <div class="w-full md:w-1/2 p-4">
                    <div class="flex justify-between items-center mb-4">
                        <button id="prevMonth" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">&lt;</button>
                        <h4 id="currentMonthYear" class="text-xl font-semibold"></h4>
                        <button id="nextMonth" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">&gt;</button>
                    </div>
                    <div id="calendar" class="grid grid-cols-7 gap-2 text-center">
                        <div class="font-bold text-gray-600">Пн</div>
                        <div class="font-bold text-gray-600">Вт</div>
                        <div class="font-bold text-gray-600">Ср</div>
                        <div class="font-bold text-gray-600">Чт</div>
                        <div class="font-bold text-gray-600">Пт</div>
                        <div class="font-bold text-gray-600">Сб</div>
                        <div class="font-bold text-gray-600">Нд</div>
                        </div>
                    <p class="mt-4 text-gray-700">Вибрана дата: <span id="selectedDateDisplay" class="font-semibold">Не вибрано</span></p>
                </div>

                <div class="w-full md:w-1/2 p-4">
                    <h4 class="text-xl font-semibold mb-3">Топ донатори за вибраний день</h4>
                    <ul id="topDonatorsList" class="list-disc pl-5 text-gray-700">
                        <li class="text-gray-500">Поки що донатів немає.</li>
                    </ul>
                </div>
            </div>
        </section>

        </main>

    <footer class="bg-gray-800 text-white py-6 mt-8">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 YarikOgraf. Усі права захищені.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const calendar = document.getElementById('calendar');
            const currentMonthYearDisplay = document.getElementById('currentMonthYear');
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const selectedDateDisplay = document.getElementById('selectedDateDisplay');
            const topDonatorsList = document.getElementById('topDonatorsList');

            let currentDate = new Date();
            let selectedDayElement = null; // To keep track of the currently selected day element

            function renderCalendar() {
                calendar.querySelectorAll('.calendar-day').forEach(day => day.remove()); // Clear previous days

                const year = currentDate.getFullYear();
                const month = currentDate.getMonth(); // 0-indexed

                currentMonthYearDisplay.textContent = new Date(year, month).toLocaleDateString('uk-UA', { month: 'long', year: 'numeric' });

                const firstDayOfMonth = new Date(year, month, 1);
                const lastDayOfMonth = new Date(year, month + 1, 0);
                const daysInMonth = lastDayOfMonth.getDate();

                // Get the day of the week for the first day of the month (0 = Sunday, 1 = Monday, etc.)
                // Adjust to make Monday the first day of the week (0-indexed for grid-cols-7)
                let firstDayOfWeek = firstDayOfMonth.getDay();
                if (firstDayOfWeek === 0) firstDayOfWeek = 6; // Sunday becomes last (6)
                else firstDayOfWeek--; // Monday (1) becomes 0, Tuesday (2) becomes 1, etc.

                // Add empty divs for preceding days to align the first day
                for (let i = 0; i < firstDayOfWeek; i++) {
                    const emptyDay = document.createElement('div');
                    calendar.appendChild(emptyDay);
                }

                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayElement = document.createElement('div');
                    dayElement.classList.add('calendar-day', 'p-2', 'rounded-lg', 'cursor-pointer', 'hover:bg-gray-200');
                    dayElement.textContent = day;
                    // Store date in dataset for easy retrieval
                    dayElement.dataset.date = `${year}-${month + 1}-${day}`; // month + 1 because it's 0-indexed

                    // Highlight today's date
                    const today = new Date();
                    if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                        dayElement.classList.add('bg-blue-300', 'font-bold');
                    }

                    calendar.appendChild(dayElement);
                }
                attachDayClickListeners();
            }

            function changeMonth(offset) {
                currentDate.setMonth(currentDate.getMonth() + offset);
                renderCalendar();
            }

            prevMonthBtn.addEventListener('click', () => changeMonth(-1));
            nextMonthBtn.addEventListener('click', () => changeMonth(1));

            renderCalendar(); // Initial render

            // Function to update donators list (placeholder for now)
            // In a real application, this would fetch data from Firebase based on the selected date
            function updateTopDonatorsList(date, totalAmount) {
                topDonatorsList.innerHTML = ''; // Clear existing list
                if (date) {
                    // This is where you would fetch data from Firebase Firestore/Realtime Database
                    // For now, it's just a placeholder.
                    // Example:
                    // db.collection('donations').where('date', '==', date).get().then(snapshot => {
                    //    snapshot.forEach(doc => {
                    //        const donator = doc.data();
                    //        const listItem = document.createElement('li');
                    //        listItem.textContent = `${donator.name}: ${donator.amount} грн`;
                    //        topDonatorsList.appendChild(listItem);
                    //    });
                    //    if (snapshot.empty) {
                    //        const listItem = document.createElement('li');
                    //        listItem.textContent = 'На цю дату донатів не знайдено.';
                    //        topDonatorsList.appendChild(listItem);
                    //    }
                    // }).catch(error => {
                    //    console.error("Error fetching donations: ", error);
                    //    const listItem = document.createElement('li');
                    //    listItem.textContent = 'Помилка завантаження донатів.';
                    //    topDonatorsList.appendChild(listItem);
                    // });

                    const listItem = document.createElement('li');
                    listItem.textContent = `Тимчасовий текст: Завантаження донатів для ${date}...`;
                    topDonatorsList.appendChild(listItem);

                } else {
                    const listItem = document.createElement('li');
                    listItem.textContent = 'Оберіть дату, щоб переглянути донаторів.';
                    topDonatorsList.appendChild(listItem);
                }
            }

            function attachDayClickListeners() {
                document.querySelectorAll('.calendar-day').forEach(day => {
                    day.addEventListener('click', () => {
                        // Remove highlight from previously selected day
                        if (selectedDayElement) {
                            selectedDayElement.classList.remove('bg-header-yo-red', 'text-white', 'border-yo-red');
                            selectedDayElement.classList.add('hover:bg-gray-200'); // Re-add hover if needed
                        }

                        // Add highlight to the newly selected day
                        day.classList.add('bg-header-yo-red', 'text-white', 'border-yo-red');
                        day.classList.remove('hover:bg-gray-200'); // Remove hover for selected
                        selectedDayElement = day; // Update reference to selected day

                        // Update the displayed selected date text
                        const dateValue = day.dataset.date;
                        const dateParts = dateValue.split('-');
                        // Month is 0-indexed for Date constructor
                        const date = new Date(parseInt(dateParts[0]), parseInt(dateParts[1]) - 1, parseInt(dateParts[2]));
                        const options = { day: 'numeric', month: 'long', year: 'numeric' };
                        selectedDateDisplay.textContent = date.toLocaleDateString('uk-UA', options);

                        // Call function to update donators list for the selected date
                        updateTopDonatorsList(dateValue, 0); // Pass the selected date
                    });
                });
            }

            // --- Login Form Handling (for the "Адмін" link) ---
            // This is the login logic directly in index.html, which is redundant if login.html exists.
            // It's better to redirect to login.html for login.
            // Keeping it for now as per your original file, but recommending `login.html` as the dedicated page.
            document.getElementById('loginForm')?.addEventListener('submit', function(e){
                e.preventDefault();
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;

                firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    // Check if the authenticated user's email matches the admin email
                    if (user.email === "yarikphoto26@gmail.com") { // !! IMPORTANT: Consider storing admin email more securely
                        window.location.href = "admin.html"; // Redirect to admin page
                    } else {
                        alert("Ви не маєте доступу!");
                        firebase.auth().signOut(); // Log out non-admin users
                    }
                })
                .catch((error) => {
                    alert("Помилка входу: " + error.message);
                    console.error("Login Error:", error);
                });
            });

            // Initial call to update donators list (empty for this static version, but function exists)
            updateTopDonatorsList('', 0); // Initialize with no date selected
        });
    </script>
</body>
</html>
